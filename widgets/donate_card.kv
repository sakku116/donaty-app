<DonateCard>:
    # @FloatLayout
    size_hint: None, None
    height: '453dp'
    width: '322dp'

    datetime: ''
    person_name: 'Unknown'
    person_pict: ''
    person_role: 'Unknown'
    
    money_form_text: self.ids.money_total.text
    message_form_text: self.ids.message_form.text
    
    # Card Shadow
    Widget: 
        size_hint: None, None
        width: self.parent.width - 12
        height: '396dp'

        pos: self.parent.pos
        pos_hint: {'bottom':1, 'right':1}

        canvas.before:
            Color:
                rgba: (0,0,0,1)
            RoundedRectangle:
                size: self.size
                pos: self.pos
                radius: [10]

    # Card Header
    BoxLayout:
        orientation: 'horizontal'

        size_hint: 1, None
        height: '72dp'

        pos: self.parent.pos
        pos_hint: {'top':1, 'right':1}
        
        # Date Time
        FloatLayout:
            BoxLayout:
                orientation: 'horizontal'
                spacing: 5

                size_hint: 1, None
                height: self.minimum_height

                pos: self.parent.pos
                pos_hint: {'center_y':.55}

                Label:
                    id: donate_datetime
                    text: root.datetime
                    color: (0,0,0,1)
                    font_size: '18sp'
                    font_name: './assets/fonts/Roboto/Roboto-Regular.ttf'

                    size_hint: None, None
                    text_size: None, None
                    width: self.texture_size[0]
                    height: self.texture_size[1]
                    valign: 'center'
                    halign: 'center'

                    pos_hint: {'center_y':.5}

                Image:
                    source: './assets/calendar.png'

                    allow_stretch: True
                    size_hint: None, None
                    width: '32dp'
                    height: '32dp'
        
        # Donate Text Label
        FloatLayout:
            size_hint: None, 1
            width: '178dp'
            border_line: 4
            radius: 5

            canvas.before:
                Color:
                    rgba: (0,0,0, 1)
                RoundedRectangle:
                    size: self.size
                    pos: self.pos
                    radius: [self.radius]

                Color:
                    rgba: (251/255, 202/255, 31/255, 1)
                RoundedRectangle:
                    size: [self.width-self.border_line, self.height-self.border_line]
                    pos: [(self.x+self.border_line/2), (self.y+self.border_line/2)]
                    radius: [self.radius-2.5]

            Label:
                text: 'Donate'
                color: (0,0,0,1)
                font_size: '25sp'
                font_name: './assets/fonts/Poppins/Poppins-Medium.ttf'

                size_hint: None, None
                width: self.texture_size[0]
                height: self.texture_size[1]

                text_size: None, None
                valign: 'center'
                halign: 'center'

                pos: self.parent.pos
                pos_hint: {'center_x':.5, 'center_y':.6}
    
    # Foreground Card
    GridLayout:
        cols: 1
        padding: [20,25,20,20]
        spacing: 19

        size_hint: None, None
        width: self.parent.width - 6
        height: '396dp'

        pos: self.parent.pos
        pos_hint: {'bottom':1}

        radius: 10
        border_line: 4

        canvas.before:
            Color:
                rgba: (0,0,0,1)
            RoundedRectangle:
                size: self.size
                pos: self.pos
                radius: [self.radius]

            Color:
                rgba: (1,1,1,1)
            RoundedRectangle:
                size: [self.width-self.border_line, self.height-self.border_line]
                pos: [(self.x+self.border_line/2), (self.y+self.border_line/2)]
                radius: [self.radius-2.5]
        
        # Profile Section
        BoxLayout:
            size_hint: 1, None
            #width: self.minimum_width
            height: self.minimum_height

            spacing: 9

            pos: self.parent.pos
            
            # Photo Profile
            Widget:
                size_hint: None, None
                width: '49dp'
                height: '49dp'

                source: root.person_pict

                canvas.before:
                    Color:
                        rgba: (1,1,1,1)
                    Ellipse:
                        size: self.size
                        pos: self.pos
                        source: self.source

                    Color:
                        rgba: (0,0,0,1)
                    Line:
                        width: 1
                        ellipse: self.x, self.y, self.width, self.height
            
            # Creator Name and Role
            FloatLayout:
                id: person_name_container

                size_hint: None, 1
                width: '120dp'
                
                BoxLayout:
                    orientation: 'vertical'

                    size_hint: 1, None
                    height: self.minimum_height

                    #spacing: 7

                    pos: self.parent.pos
                    pos_hint: {'center_y':.55}
                    
                    canvas.before:
                        Color:
                            rgba: (0,0,0,0)
                        Line:
                            rectangle: self.x, self.y, self.width, self.height

                    Label: # name
                        id: person_name
                        text: root.person_name
                        color: (0,0,0,1)
                        font_name: './assets/fonts/Poppins/Poppins-Medium.ttf'
                        font_size: '18sp'
                        line_height: .8

                        size_hint: 1, None
                        height: self.texture_size[1]

                        text_size: self.width, None
                        valign: 'top'
                        halign: 'left'

                    Label: # role
                        text: root.person_role
                        color: (0,0,0,.6)
                        font_size: '12sp'
                        font_name: './assets/fonts/Roboto/Roboto-Regular.ttf'

                        size_hint: None,None
                        width: self.texture_size[0]
                        height: self.texture_size[1]

                        text_size: None, None
                        valign: 'top'
                        halign: 'left'

            # Follow us Button
            FloatLayout:
                Button:
                    id: follow_button
                    text: 'Follow Us'
                    font_size: '13sp'
                    font_name: './assets/fonts/Roboto/Roboto-Medium.ttf'

                    size_hint: None, None
                    width: '93dp'
                    height: '39dp'

                    pos: self.parent.pos
                    pos_hint: {'right':1, 'center_y':.5}

                    background_color: (0,0,0,0)
                    background_normal: ''

                    canvas.before:
                        Color:
                            rgba: (239/255, 105/255, 137/255, 1 if self.state == 'normal' else .8)
                        RoundedRectangle:
                            size: self.size
                            pos: self.pos
                            radius: [5]
        
        # Form
        BoxLayout:
            orientation: 'vertical'
            spacing: 13

            size_hint: 1, None
            height: self.minimum_height
            
            # Money Form
            FloatLayout: 
                size_hint: 1, None
                height: '46dp'
                border_line: 3
                radius: 5

                canvas.before:
                    Color:
                        rgba: (0,0,0,1)
                    RoundedRectangle:
                        size: self.size
                        pos: self.pos
                        radius: [self.radius]

                    Color:
                        rgba: (1,1,1,1)
                    RoundedRectangle:
                        size: [self.width-self.border_line, self.height-self.border_line]
                        pos: [(self.x+self.border_line/2), (self.y+self.border_line/2)]
                        radius: [self.radius-2.5]

                BoxLayout:
                    orientation: 'horizontal'
                    size_hint: None, 1
                    width: self.minimum_width

                    pos: self.parent.pos

                    padding: [12,0,0,0]
                    spacing: 10

                    Label:
                        text: '$'
                        color: (0,0,0,.6)
                        font_size: '18sp'
                        font_name: './assets/fonts/Poppins/Poppins-Medium.ttf'

                        size_hint: None, 1
                        width: self.texture_size[0]

                        text_size: None, self.height
                        valign: 'center'
                        halign: 'center'

                    Label:
                        id: money_total
                        text: '0'
                        color: (0,0,0,1)
                        font_size: '16sp'
                        font_name: './assets/fonts/Roboto/Roboto-Regular.ttf'

                        size_hint: None, None
                        width: self.texture_size[0]
                        height: self.texture_size[1]

                        pos_hint: {'center_y':.5}

                        text_size: None, None
                        valign: 'center'
                        halign: 'center'

                BoxLayout: # minus button
                    size_hint: None, None
                    width: self.minimum_width
                    height: self.minimum_height

                    pos: self.parent.pos
                    pos_hint: {'right':1, 'center_y':.5}

                    padding: [0,0,12,0]
                    spacing: 11

                    Button:
                        id: minus_money_button
                        color: (0,0,0,1)
                        font_size: 26

                        size_hint: None, None
                        width: '32dp'
                        height: '32dp'

                        background_color: (0,0,0,0)
                        background_normal: ''

                        step: 1 if root.ids.money_total.text != '0' else 0

                        on_release:
                            root.ids.money_total.text = f'{int(root.ids.money_total.text) - self.step}'

                        canvas.before:
                            Color:
                                rgba: (244/255, 244/255, 244/255, 0.6)
                            Ellipse:
                                size: self.size
                                pos: self.pos

                            Color:
                                rgba: (244/255, 244/255, 244/255, 0.6)
                            Ellipse:
                                size: [20, 20]
                                pos: [self.center_x - 10, self.center_y - 10]
                                source: './assets/minus.png'

                    Button: # plus button
                        id: plus_money_button
                        color: (0,0,0,1)
                        font_size: '26sp'

                        size_hint: None, None
                        width: '32dp'
                        height: '32dp'

                        background_color: (0,0,0,0)
                        background_normal: ''

                        on_release:
                            root.ids.money_total.text = f'{int(root.ids.money_total.text)+1}'

                        canvas.before:
                            Color:
                                rgba: (244/255, 244/255, 244/255, 1)
                            Ellipse:
                                size: self.size
                                pos: self.pos

                            Color:
                                rgba: (244/255, 244/255, 244/255, 1)
                            Ellipse:
                                size: [20, 20]
                                pos: [self.center_x - 10, self.center_y - 10]
                                source: './assets/plus.png'
            
            # Message Form
            BoxLayout: 
                size_hint: 1, None
                height: '130dp'
                border_line: 3
                radius: 5

                canvas.before:
                    Color:
                        rgba: (0,0,0,1)
                    RoundedRectangle:
                        size: self.size
                        pos: self.pos
                        radius: [self.radius]

                    Color:
                        rgba: (1,1,1,1)
                    RoundedRectangle:
                        size: [self.width-self.border_line, self.height-self.border_line]
                        pos: [(self.x+self.border_line/2), (self.y+self.border_line/2)]
                        radius: [self.radius-2.5]

                TextInput:
                    id: message_form
                    padding: [13, 14, 13, 14]
                    hint_text: 'Your message'
                    hint_text_color: (0,0,0,.6)
                    font_size: '16sp'
                    foreground_color: (0,0,0,1)
                    multiline: True

                    size: self.parent.size

                    background_color: (0,0,0,0)
                    background_normal: ''
        
        # Send Button
        SendButton:
            id: send_button
            text: 'Send'
